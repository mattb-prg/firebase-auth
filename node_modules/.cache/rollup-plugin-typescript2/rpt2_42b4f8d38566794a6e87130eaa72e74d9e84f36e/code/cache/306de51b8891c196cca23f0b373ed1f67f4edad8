{"code":"/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { __awaiter, __generator } from \"tslib\";\r\nimport { _assert } from '../../core/util/assert';\r\nexport var _SOLVE_TIME_MS = 500;\r\nexport var _EXPIRATION_TIME_MS = 60000;\r\nexport var _WIDGET_ID_START = 1000000000000;\r\nvar MockReCaptcha = /** @class */ (function () {\r\n    function MockReCaptcha(auth) {\r\n        this.auth = auth;\r\n        this.counter = _WIDGET_ID_START;\r\n        this._widgets = new Map();\r\n    }\r\n    MockReCaptcha.prototype.render = function (container, parameters) {\r\n        var id = this.counter;\r\n        this._widgets.set(id, new MockWidget(container, this.auth.name, parameters || {}));\r\n        this.counter++;\r\n        return id;\r\n    };\r\n    MockReCaptcha.prototype.reset = function (optWidgetId) {\r\n        var _a;\r\n        var id = optWidgetId || _WIDGET_ID_START;\r\n        void ((_a = this._widgets.get(id)) === null || _a === void 0 ? void 0 : _a.delete());\r\n        this._widgets.delete(id);\r\n    };\r\n    MockReCaptcha.prototype.getResponse = function (optWidgetId) {\r\n        var _a;\r\n        var id = optWidgetId || _WIDGET_ID_START;\r\n        return ((_a = this._widgets.get(id)) === null || _a === void 0 ? void 0 : _a.getResponse()) || '';\r\n    };\r\n    MockReCaptcha.prototype.execute = function (optWidgetId) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var id;\r\n            return __generator(this, function (_b) {\r\n                id = optWidgetId || _WIDGET_ID_START;\r\n                void ((_a = this._widgets.get(id)) === null || _a === void 0 ? void 0 : _a.execute());\r\n                return [2 /*return*/, ''];\r\n            });\r\n        });\r\n    };\r\n    return MockReCaptcha;\r\n}());\r\nexport { MockReCaptcha };\r\nvar MockGreCAPTCHATopLevel = /** @class */ (function () {\r\n    function MockGreCAPTCHATopLevel() {\r\n        this.enterprise = new MockGreCAPTCHA();\r\n    }\r\n    MockGreCAPTCHATopLevel.prototype.ready = function (callback) {\r\n        callback();\r\n    };\r\n    MockGreCAPTCHATopLevel.prototype.execute = function (\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    _siteKey, _options) {\r\n        return Promise.resolve('token');\r\n    };\r\n    MockGreCAPTCHATopLevel.prototype.render = function (\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    _container, _parameters) {\r\n        return '';\r\n    };\r\n    return MockGreCAPTCHATopLevel;\r\n}());\r\nexport { MockGreCAPTCHATopLevel };\r\nvar MockGreCAPTCHA = /** @class */ (function () {\r\n    function MockGreCAPTCHA() {\r\n    }\r\n    MockGreCAPTCHA.prototype.ready = function (callback) {\r\n        callback();\r\n    };\r\n    MockGreCAPTCHA.prototype.execute = function (\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    _siteKey, _options) {\r\n        return Promise.resolve('token');\r\n    };\r\n    MockGreCAPTCHA.prototype.render = function (\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    _container, _parameters) {\r\n        return '';\r\n    };\r\n    return MockGreCAPTCHA;\r\n}());\r\nexport { MockGreCAPTCHA };\r\nvar MockWidget = /** @class */ (function () {\r\n    function MockWidget(containerOrId, appName, params) {\r\n        var _this = this;\r\n        this.params = params;\r\n        this.timerId = null;\r\n        this.deleted = false;\r\n        this.responseToken = null;\r\n        this.clickHandler = function () {\r\n            _this.execute();\r\n        };\r\n        var container = typeof containerOrId === 'string'\r\n            ? document.getElementById(containerOrId)\r\n            : containerOrId;\r\n        _assert(container, \"argument-error\" /* AuthErrorCode.ARGUMENT_ERROR */, { appName: appName });\r\n        this.container = container;\r\n        this.isVisible = this.params.size !== 'invisible';\r\n        if (this.isVisible) {\r\n            this.execute();\r\n        }\r\n        else {\r\n            this.container.addEventListener('click', this.clickHandler);\r\n        }\r\n    }\r\n    MockWidget.prototype.getResponse = function () {\r\n        this.checkIfDeleted();\r\n        return this.responseToken;\r\n    };\r\n    MockWidget.prototype.delete = function () {\r\n        this.checkIfDeleted();\r\n        this.deleted = true;\r\n        if (this.timerId) {\r\n            clearTimeout(this.timerId);\r\n            this.timerId = null;\r\n        }\r\n        this.container.removeEventListener('click', this.clickHandler);\r\n    };\r\n    MockWidget.prototype.execute = function () {\r\n        var _this = this;\r\n        this.checkIfDeleted();\r\n        if (this.timerId) {\r\n            return;\r\n        }\r\n        this.timerId = window.setTimeout(function () {\r\n            _this.responseToken = generateRandomAlphaNumericString(50);\r\n            var _a = _this.params, callback = _a.callback, expiredCallback = _a[\"expired-callback\"];\r\n            if (callback) {\r\n                try {\r\n                    callback(_this.responseToken);\r\n                }\r\n                catch (e) { }\r\n            }\r\n            _this.timerId = window.setTimeout(function () {\r\n                _this.timerId = null;\r\n                _this.responseToken = null;\r\n                if (expiredCallback) {\r\n                    try {\r\n                        expiredCallback();\r\n                    }\r\n                    catch (e) { }\r\n                }\r\n                if (_this.isVisible) {\r\n                    _this.execute();\r\n                }\r\n            }, _EXPIRATION_TIME_MS);\r\n        }, _SOLVE_TIME_MS);\r\n    };\r\n    MockWidget.prototype.checkIfDeleted = function () {\r\n        if (this.deleted) {\r\n            throw new Error('reCAPTCHA mock was already deleted!');\r\n        }\r\n    };\r\n    return MockWidget;\r\n}());\r\nexport { MockWidget };\r\nfunction generateRandomAlphaNumericString(len) {\r\n    var chars = [];\r\n    var allowedChars = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    for (var i = 0; i < len; i++) {\r\n        chars.push(allowedChars.charAt(Math.floor(Math.random() * allowedChars.length)));\r\n    }\r\n    return chars.join('');\r\n}\r\n//# sourceMappingURL=recaptcha_mock.js.map","references":["/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/core/errors.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/core/util/assert.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/model/auth.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/model/public_types.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/platform_browser/recaptcha/recaptcha.ts"],"map":"{\"version\":3,\"file\":\"recaptcha_mock.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/platform_browser/recaptcha/recaptcha_mock.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/node_modules/.cache/rollup-plugin-typescript2/placeholder/src/platform_browser/recaptcha/recaptcha_mock.d.ts","writeByteOrderMark":false,"text":"/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { AuthInternal } from '../../model/auth';\r\nimport { RecaptchaParameters } from '../../model/public_types';\r\nimport { Recaptcha, GreCAPTCHATopLevel, GreCAPTCHARenderOption, GreCAPTCHA } from './recaptcha';\r\nexport declare const _SOLVE_TIME_MS = 500;\r\nexport declare const _EXPIRATION_TIME_MS = 60000;\r\nexport declare const _WIDGET_ID_START = 1000000000000;\r\nexport interface Widget {\r\n    getResponse: () => string | null;\r\n    delete: () => void;\r\n    execute: () => void;\r\n}\r\nexport declare class MockReCaptcha implements Recaptcha {\r\n    private readonly auth;\r\n    private counter;\r\n    _widgets: Map<number, Widget>;\r\n    constructor(auth: AuthInternal);\r\n    render(container: string | HTMLElement, parameters?: RecaptchaParameters): number;\r\n    reset(optWidgetId?: number): void;\r\n    getResponse(optWidgetId?: number): string;\r\n    execute(optWidgetId?: number | string): Promise<string>;\r\n}\r\nexport declare class MockGreCAPTCHATopLevel implements GreCAPTCHATopLevel {\r\n    enterprise: GreCAPTCHA;\r\n    ready(callback: () => void): void;\r\n    execute(_siteKey: string, _options: {\r\n        action: string;\r\n    }): Promise<string>;\r\n    render(_container: string | HTMLElement, _parameters: GreCAPTCHARenderOption): string;\r\n}\r\nexport declare class MockGreCAPTCHA implements GreCAPTCHA {\r\n    ready(callback: () => void): void;\r\n    execute(_siteKey: string, _options: {\r\n        action: string;\r\n    }): Promise<string>;\r\n    render(_container: string | HTMLElement, _parameters: GreCAPTCHARenderOption): string;\r\n}\r\nexport declare class MockWidget {\r\n    private readonly params;\r\n    private readonly container;\r\n    private readonly isVisible;\r\n    private timerId;\r\n    private deleted;\r\n    private responseToken;\r\n    private readonly clickHandler;\r\n    constructor(containerOrId: string | HTMLElement, appName: string, params: RecaptchaParameters);\r\n    getResponse(): string | null;\r\n    delete(): void;\r\n    execute(): void;\r\n    private checkIfDeleted;\r\n}\r\n"}}
