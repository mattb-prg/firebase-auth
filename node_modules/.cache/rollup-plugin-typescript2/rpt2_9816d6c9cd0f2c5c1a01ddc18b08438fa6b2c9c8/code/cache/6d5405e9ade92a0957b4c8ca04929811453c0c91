{"code":"/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { __extends } from \"tslib\";\r\nimport { _parseToken } from './id_token_result';\r\n/**\r\n * Parse the `AdditionalUserInfo` from the ID token response.\r\n *\r\n */\r\nexport function _fromIdTokenResponse(idTokenResponse) {\r\n    var _a, _b;\r\n    if (!idTokenResponse) {\r\n        return null;\r\n    }\r\n    var providerId = idTokenResponse.providerId;\r\n    var profile = idTokenResponse.rawUserInfo\r\n        ? JSON.parse(idTokenResponse.rawUserInfo)\r\n        : {};\r\n    var isNewUser = idTokenResponse.isNewUser ||\r\n        idTokenResponse.kind === \"identitytoolkit#SignupNewUserResponse\" /* IdTokenResponseKind.SignupNewUser */;\r\n    if (!providerId && (idTokenResponse === null || idTokenResponse === void 0 ? void 0 : idTokenResponse.idToken)) {\r\n        var signInProvider = (_b = (_a = _parseToken(idTokenResponse.idToken)) === null || _a === void 0 ? void 0 : _a.firebase) === null || _b === void 0 ? void 0 : _b['sign_in_provider'];\r\n        if (signInProvider) {\r\n            var filteredProviderId = signInProvider !== \"anonymous\" /* ProviderId.ANONYMOUS */ &&\r\n                signInProvider !== \"custom\" /* ProviderId.CUSTOM */\r\n                ? signInProvider\r\n                : null;\r\n            // Uses generic class in accordance with the legacy SDK.\r\n            return new GenericAdditionalUserInfo(isNewUser, filteredProviderId);\r\n        }\r\n    }\r\n    if (!providerId) {\r\n        return null;\r\n    }\r\n    switch (providerId) {\r\n        case \"facebook.com\" /* ProviderId.FACEBOOK */:\r\n            return new FacebookAdditionalUserInfo(isNewUser, profile);\r\n        case \"github.com\" /* ProviderId.GITHUB */:\r\n            return new GithubAdditionalUserInfo(isNewUser, profile);\r\n        case \"google.com\" /* ProviderId.GOOGLE */:\r\n            return new GoogleAdditionalUserInfo(isNewUser, profile);\r\n        case \"twitter.com\" /* ProviderId.TWITTER */:\r\n            return new TwitterAdditionalUserInfo(isNewUser, profile, idTokenResponse.screenName || null);\r\n        case \"custom\" /* ProviderId.CUSTOM */:\r\n        case \"anonymous\" /* ProviderId.ANONYMOUS */:\r\n            return new GenericAdditionalUserInfo(isNewUser, null);\r\n        default:\r\n            return new GenericAdditionalUserInfo(isNewUser, providerId, profile);\r\n    }\r\n}\r\nvar GenericAdditionalUserInfo = /** @class */ (function () {\r\n    function GenericAdditionalUserInfo(isNewUser, providerId, profile) {\r\n        if (profile === void 0) { profile = {}; }\r\n        this.isNewUser = isNewUser;\r\n        this.providerId = providerId;\r\n        this.profile = profile;\r\n    }\r\n    return GenericAdditionalUserInfo;\r\n}());\r\nvar FederatedAdditionalUserInfoWithUsername = /** @class */ (function (_super) {\r\n    __extends(FederatedAdditionalUserInfoWithUsername, _super);\r\n    function FederatedAdditionalUserInfoWithUsername(isNewUser, providerId, profile, username) {\r\n        var _this = _super.call(this, isNewUser, providerId, profile) || this;\r\n        _this.username = username;\r\n        return _this;\r\n    }\r\n    return FederatedAdditionalUserInfoWithUsername;\r\n}(GenericAdditionalUserInfo));\r\nvar FacebookAdditionalUserInfo = /** @class */ (function (_super) {\r\n    __extends(FacebookAdditionalUserInfo, _super);\r\n    function FacebookAdditionalUserInfo(isNewUser, profile) {\r\n        return _super.call(this, isNewUser, \"facebook.com\" /* ProviderId.FACEBOOK */, profile) || this;\r\n    }\r\n    return FacebookAdditionalUserInfo;\r\n}(GenericAdditionalUserInfo));\r\nvar GithubAdditionalUserInfo = /** @class */ (function (_super) {\r\n    __extends(GithubAdditionalUserInfo, _super);\r\n    function GithubAdditionalUserInfo(isNewUser, profile) {\r\n        return _super.call(this, isNewUser, \"github.com\" /* ProviderId.GITHUB */, profile, typeof (profile === null || profile === void 0 ? void 0 : profile.login) === 'string' ? profile === null || profile === void 0 ? void 0 : profile.login : null) || this;\r\n    }\r\n    return GithubAdditionalUserInfo;\r\n}(FederatedAdditionalUserInfoWithUsername));\r\nvar GoogleAdditionalUserInfo = /** @class */ (function (_super) {\r\n    __extends(GoogleAdditionalUserInfo, _super);\r\n    function GoogleAdditionalUserInfo(isNewUser, profile) {\r\n        return _super.call(this, isNewUser, \"google.com\" /* ProviderId.GOOGLE */, profile) || this;\r\n    }\r\n    return GoogleAdditionalUserInfo;\r\n}(GenericAdditionalUserInfo));\r\nvar TwitterAdditionalUserInfo = /** @class */ (function (_super) {\r\n    __extends(TwitterAdditionalUserInfo, _super);\r\n    function TwitterAdditionalUserInfo(isNewUser, profile, screenName) {\r\n        return _super.call(this, isNewUser, \"twitter.com\" /* ProviderId.TWITTER */, profile, screenName) || this;\r\n    }\r\n    return TwitterAdditionalUserInfo;\r\n}(FederatedAdditionalUserInfoWithUsername));\r\n/**\r\n * Extracts provider specific {@link AdditionalUserInfo} for the given credential.\r\n *\r\n * @param userCredential - The user credential.\r\n *\r\n * @public\r\n */\r\nexport function getAdditionalUserInfo(userCredential) {\r\n    var _a = userCredential, user = _a.user, _tokenResponse = _a._tokenResponse;\r\n    if (user.isAnonymous && !_tokenResponse) {\r\n        // Handle the special case where signInAnonymously() gets called twice.\r\n        // No network call is made so there's nothing to actually fill this in\r\n        return {\r\n            providerId: null,\r\n            isNewUser: false,\r\n            profile: null\r\n        };\r\n    }\r\n    return _fromIdTokenResponse(_tokenResponse);\r\n}\r\n//# sourceMappingURL=additional_user_info.js.map","references":["/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/model/public_types.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/model/id_token.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/core/user/id_token_result.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/model/user.ts","/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/src/model/enums.ts"],"map":"{\"version\":3,\"file\":\"additional_user_info.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/core/user/additional_user_info.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/matt/Desktop/Projects/Freelance/Damon Chen/firebase-package/packages/auth/node_modules/.cache/rollup-plugin-typescript2/placeholder/src/core/user/additional_user_info.d.ts","writeByteOrderMark":false,"text":"/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport { AdditionalUserInfo, UserCredential } from '../../model/public_types';\r\nimport { IdTokenResponse } from '../../model/id_token';\r\n/**\r\n * Parse the `AdditionalUserInfo` from the ID token response.\r\n *\r\n */\r\nexport declare function _fromIdTokenResponse(idTokenResponse?: IdTokenResponse): AdditionalUserInfo | null;\r\n/**\r\n * Extracts provider specific {@link AdditionalUserInfo} for the given credential.\r\n *\r\n * @param userCredential - The user credential.\r\n *\r\n * @public\r\n */\r\nexport declare function getAdditionalUserInfo(userCredential: UserCredential): AdditionalUserInfo | null;\r\n"}}
